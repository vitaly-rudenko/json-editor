(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{104:function(e,t,n){},105:function(e,t,n){},106:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(18),l=n.n(i),o=n(3),c=n(1),s=n(2),u=n(7),f=Object.freeze({PRIMITIVE:"primitive",OBJECT:"object",ARRAY:"array"}),h=function(){function e(){Object(s.a)(this,e)}return Object(u.a)(e,null,[{key:"fromFieldList",value:function(e){var t={},n=!0,r=!1,a=void 0;try{for(var i,l=e.fields[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var s=i.value;console.log("[".concat([].concat(Object(c.a)(s.parentChain),[s.key]).join("."),": ").concat(void 0===s.value?"none":s.value," (").concat(s.type,", item: ").concat(s.isArrayItem,")]"))}}catch(x){r=!0,a=x}finally{try{n||null==l.return||l.return()}finally{if(r)throw a}}var u=!0,h=!1,d=void 0;try{for(var y,v=e.fields[Symbol.iterator]();!(u=(y=v.next()).done);u=!0){var p=y.value,b=t,O=!0,m=!1,j=void 0;try{for(var g,C=p.parentChain.entries()[Symbol.iterator]();!(O=(g=C.next()).done);O=!0){var k=g.value,w=Object(o.a)(k,2),E=w[0],A=w[1];void 0===b[A]&&(E===p.level-1?b[A]=p.type===f.ARRAY?[]:{}:b[A]={}),b=b[A]}}catch(x){m=!0,j=x}finally{try{O||null==C.return||C.return()}finally{if(m)throw j}}var I=p.type===f.ARRAY?[]:p.type===f.OBJECT?{}:p.value;b[p.key]=I}}catch(x){h=!0,d=x}finally{try{u||null==v.return||v.return()}finally{if(h)throw d}}return t}}]),e}(),d=n(40),y=n.n(d),v=function(){function e(t){Object(s.a)(this,e),this.id=void 0,this.parentChain=void 0,this.key=void 0,this.value=void 0,this.isArrayItem=void 0,this.id=t.id||y()(),this.parentChain=Object(c.a)(t.parentChain||[]),this.key=t.key,this.value=t.value,this.isArrayItem=Boolean(t.isArrayItem)}return Object(u.a)(e,[{key:"clone",value:function(){return new e({id:this.id,key:this.key,value:this.value,parentChain:this.parentChain,isArrayItem:this.isArrayItem})}},{key:"isArray",get:function(){return this.type===f.ARRAY}},{key:"isObject",get:function(){return this.type===f.OBJECT}},{key:"isPrimitive",get:function(){return this.type===f.PRIMITIVE}},{key:"isContainer",get:function(){return this.isArray||this.isObject}},{key:"type",get:function(){return function(e){if(Array.isArray(e))return f.ARRAY;if("object"===typeof e&&null!==e)return f.OBJECT;if(null===e||"number"===typeof e&&!Number.isNaN(e)||"string"===typeof e||"boolean"===typeof e)return f.PRIMITIVE;throw new Error("Invalid value type")}(this.value)}},{key:"level",get:function(){return this.parentChain.length}}]),e}(),p=n(49),b=n(19),O=n(8),m=n(41),j=n(48),g=function(e){function t(e){var n,r=e.code,a=e.message;return Object(s.a)(this,t),(n=Object(p.a)(this,Object(b.a)(t).call(this,a||"Unexpected error"))).code=void 0,n.code=r,Error.captureStackTrace(Object(O.a)(n),t),Object.setPrototypeOf(Object(O.a)(n),t.prototype),n}return Object(m.a)(t,e),t}(Object(j.a)(Error)),C=function(){function e(t){Object(s.a)(this,e),this.fields=void 0,this.fields=Object(c.a)(t)}return Object(u.a)(e,[{key:"clone",value:function(){return new e(this.fields.map(function(e){return e.clone()}))}},{key:"moveField",value:function(e,t){var n="number"===typeof e?e:this.indexOf(e),r=null===t[0]?null:"string"!==typeof t[0]?t[0]:this.indexOf(t[0]),a=null===t[1]?null:"string"!==typeof t[1]?t[1]:this.indexOf(t[1]);if(n<0||n>=this.fields.length)throw new Error("Invalid sourceId argument value");if(null===r&&null===a)throw new Error("At least one of destinationIds values must not be null");if(null!==r&&(r<0||r>this.fields.length))throw new Error("Invalid destinationIds[0] argument value");if(null!==a&&(a<0||a>this.fields.length))throw new Error("Invalid destinationIds[1] argument value");if(n===r)return!1;var i=this.fields[n],l=[].concat(Object(c.a)(i.parentChain),[i.key]),o=null!==r?this.fields[r]:null,s=null!==a?this.fields[a]:null;if(o&&!s&&this.startsWith(o.parentChain,l))return!1;var u=i.clone();if(u.isArrayItem)if(o&&o.isArray)u.parentChain=[].concat(Object(c.a)(o.parentChain),[o.key]);else if(o&&o.isArrayItem)u.parentChain=o.parentChain;else{if(!s||!s.isArrayItem)throw new g({code:"BAD_MOVEMENT",message:"Could not move an array item to a non-array context"});u.parentChain=s.parentChain}else if(o&&o.isObject){if(this.startsWith(o.parentChain,l))throw new g({code:"BAD_MOVEMENT",message:"Could not move an object inside itself"});u.parentChain=[].concat(Object(c.a)(o.parentChain),[o.key])}else if(o&&s){if((o.isArrayItem||o.isArray)&&s.isArrayItem)throw new g({code:"BAD_MOVEMENT",message:"Could not move a non-array item into an array"});o.isArrayItem?u.parentChain=s.parentChain:u.parentChain=o.parentChain;for(var f=o.parentChain,h=s.parentChain,d=[],y=0;y<Math.min(f.length,h.length)&&f[y]===h[y];y++)d.push(f[y]);if(this.startsWith(d,l))throw new g({code:"BAD_MOVEMENT",message:"Could not move an object inside itself"});u.parentChain=d}else u.parentChain=[];if(!u.isArrayItem&&this.getSiblings(u).some(function(e){return e.key===u.key}))throw new g({code:"BAD_MOVEMENT",message:"Could not move the field due to key overlap"});var v=Object(c.a)(this.fields);if(v.splice(null!==r?r+1:0,0,u),v.splice(v.indexOf(i),1),i.isContainer){var p,b=this.getChildren(i),O=!0,m=!1,j=void 0;try{for(var C,k=b[Symbol.iterator]();!(O=(C=k.next()).done);O=!0){var w=C.value;v.splice(v.indexOf(w),1)}}catch(A){m=!0,j=A}finally{try{O||null==k.return||k.return()}finally{if(m)throw j}}var E=b.map(function(e){var t=e.clone();return t.parentChain=[].concat(Object(c.a)(u.parentChain),[u.key],Object(c.a)(e.parentChain.slice(i.level+1))),t});(p=v).splice.apply(p,[v.indexOf(u)+1,0].concat(Object(c.a)(E)))}return u.isArrayItem&&(this.equals(i.parentChain,u.parentChain)||(v=this.refreshSiblings(i,v)),v=this.refreshSiblings(u,v)),this.fields=v,!0}},{key:"refreshSiblings",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.fields,n=this.getSiblings(e,{includeSelf:!0},t),r=Object(c.a)(t),a=Number.POSITIVE_INFINITY,i=!0,l=!1,o=void 0;try{for(var s,u=n[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var f=s.value,h=r.indexOf(f);h<a&&(a=h),r.splice(h,1)}}catch(y){l=!0,o=y}finally{try{i||null==u.return||u.return()}finally{if(l)throw o}}var d=n.map(function(e,t){var n=e.clone();return n.key=t,n});return r.splice.apply(r,[a,0].concat(Object(c.a)(d))),r}},{key:"getParent",value:function(e){return this.getItemByChain(e.parentChain)}},{key:"getItemByChain",value:function(e){var t=this;if(0===e.length)return null;var n=e.slice(0,-1),r=e[e.length-1];return this.fields.find(function(e){return e.key===r&&t.equals(e.parentChain,n)})||null}},{key:"getSiblings",value:function(e){var t=this,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).includeSelf,r=void 0!==n&&n;return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.fields).filter(function(n){return t.equals(n.parentChain,e.parentChain)&&(r||n.id!==e.id)})}},{key:"getChildren",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.fields;if(e.type!==f.OBJECT&&e.type!==f.ARRAY)return[];var r=[].concat(Object(c.a)(e.parentChain),[e.key]);return n.filter(function(e){return t.startsWith(e.parentChain,r)})}},{key:"equals",value:function(e,t){return e.length===t.length&&e.every(function(e,n){return t[n]===e})}},{key:"startsWith",value:function(e,t){return t.every(function(t,n){return e[n]===t})}},{key:"indexOf",value:function(e){return this.fields.findIndex(function(t){return t.id===e})}}]),e}(),k=function(){function e(){Object(s.a)(this,e)}return Object(u.a)(e,null,[{key:"from",value:function(e){if(Array.isArray(e))throw new Error("Arrays are not supported yet");if(!this._isPlainObject(e))throw new Error("Source should be either an array or plain object");return new C(this._fromObject(e))}},{key:"_fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=!0,a=!1,i=void 0;try{for(var l,s=e.entries()[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var u=l.value,f=Object(o.a)(u,2),h=f[0],d=f[1];n.push(new v({key:h,value:d,parentChain:t,isArrayItem:!0})),Array.isArray(d)&&n.push.apply(n,Object(c.a)(this._fromArray(d,[].concat(Object(c.a)(t),[h])))),this._isPlainObject(d)&&n.push.apply(n,Object(c.a)(this._fromObject(d,[].concat(Object(c.a)(t),[h]))))}}catch(y){a=!0,i=y}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}},{key:"_fromObject",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=0,a=Object.entries(e);r<a.length;r++){var i=a[r],l=Object(o.a)(i,2),s=l[0],u=l[1];n.push(new v({key:s,value:u,parentChain:t})),Array.isArray(u)&&n.push.apply(n,Object(c.a)(this._fromArray(u,[].concat(Object(c.a)(t),[s])))),this._isPlainObject(u)&&n.push.apply(n,Object(c.a)(this._fromObject(u,[].concat(Object(c.a)(t),[s]))))}return n}},{key:"_isPlainObject",value:function(e){return"object"===typeof e&&null!==e&&!Array.isArray(e)}}]),e}(),w=n(22),E=n(42),A=n(43);n(63);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(n,!0).forEach(function(t){Object(E.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var S=[13624049,13103034,16381602,16370824,16758927,16761082],N=a.a.memo(a.a.forwardRef(function(e,t){var n=e.field,r=(e.index,e.className),i=void 0===r?"":r,l=Object(A.a)(e,["field","index","className"]);return a.a.createElement("div",Object.assign({ref:t},l,{className:"field-block ".concat(i),style:x({},l.style||{},{marginLeft:"".concat(16*n.level,"px"),backgroundColor:"#"+S[n.level%S.length].toString(16)})}),!n.isArrayItem&&"".concat(n.key,":")," ",function(e){return e.type===f.PRIMITIVE?"string"===typeof e.value?'"'+e.value+'"':String(e.value):e.type===f.ARRAY?"[":"{"}(n))})),_=(n(64),function(e){var t=e.fieldList,n=e.onFieldListUpdate,i=e.className,l=void 0===i?"":i,o=Object(r.useCallback)(function(e){if(e.destination&&e.source.index!==e.destination.index){var r,a,i=e.source.index,l=e.destination.index;i>l?(r=0===l?null:l-1,a=l):(r=l,a=l===t.fields.length-1?null:l+1);try{t.moveField(i,[r,a])&&n()}catch(o){if(!(o instanceof g))throw o;console.warn("[".concat(o.code,"] ").concat(o.message))}}},[n,t]);return a.a.createElement(w.a,{onDragEnd:o},a.a.createElement(w.c,{droppableId:"droppable"},function(e){return a.a.createElement("div",Object.assign({},e.droppableProps,{ref:e.innerRef,className:"field-list ".concat(l)}),t.fields.map(function(e,t){return a.a.createElement(w.b,{key:e.id,draggableId:e.id,index:t},function(n){return a.a.createElement(N,Object.assign({className:"field-list__field-block",ref:n.innerRef},n.draggableProps,n.dragHandleProps,{index:t,field:e}))})}),e.placeholder)}))}),P=(n(104),function(e){var t=e.value,n=e.onChange,i=e.className,l=void 0===i?"":i,c=Object(r.useState)(t),s=Object(o.a)(c,2),u=s[0],f=s[1],h=Object(r.useState)(!1),d=Object(o.a)(h,2),y=d[0],v=d[1],p=Object(r.useRef)({start:0,end:0}),b=Object(r.useRef)(),O=Object(r.useCallback)(function(){return f(t)},[t]);Object(r.useEffect)(function(){f(t)},[t]),Object(r.useEffect)(function(){var e=function(e){e.ctrlKey&&"s"===e.key&&(e.preventDefault(),u!==t&&n(u,O))};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}},[t,u,n,O]);var m=Object(r.useCallback)(function(e){var t=e.target.value;f(t)},[f]),j=Object(r.useCallback)(function(){v(!0)},[v]),g=Object(r.useCallback)(function(e){var r=e.target.value;v(!1),r!==t&&n(r,O)},[t,n,O]),C=Object(r.useCallback)(function(e){var t=e.target,n=t.value;if("Tab"===e.key){e.preventDefault();var r=t.selectionStart,a=t.selectionEnd;t.value=n.substring(0,r)+"    "+n.substring(a),t.selectionEnd=r+"    ".length}},[]),k=Object(r.useCallback)(function(e){p.current.start=e.target.selectionStart,p.current.end=e.target.selectionEnd},[p]);return a.a.createElement("div",{className:"text-editor ".concat(l)},a.a.createElement("textarea",{ref:b,className:["text-editor__text-area",y&&"text-editor__text-area--focused"].filter(Boolean).join(" "),onChange:m,onBlur:g,onFocus:j,value:u,onKeyDown:C,onSelect:k,autoCapitalize:"off",autoCorrect:"off",autoComplete:"off",spellCheck:"false"}),y&&a.a.createElement("div",{className:"text-editor__apply-notice"},"Click outside to apply changes (Ctrl+S)"))}),R=(n(105),{hello:"world",isEnabled:!0,nested:{lorem:"ipsum",secretNumber:123,nested2:{jon:"snow"}},inception:{hello2:"world",isEnabled2:!0,nested3:{lorem2:"ipsum",secretNumber2:123,nested4:{jon:"snow"}}}});l.a.render(a.a.createElement(function(){var e=Object(r.useState)(k.from(R)),t=Object(o.a)(e,2),n=t[0],i=t[1],l=Object(r.useMemo)(function(){return JSON.stringify(h.fromFieldList(n),null,4)},[n]),c=Object(r.useCallback)(function(){i(n.clone())},[n,i]),s=Object(r.useCallback)(function(e,t){var n;try{n=JSON.parse(e)}catch(r){return void t()}i(k.from(n))},[i]);return a.a.createElement("div",{className:"app-wrapper"},a.a.createElement("div",{className:"app"},a.a.createElement(_,{className:"app__field-list",fieldList:n,onFieldListUpdate:c}),a.a.createElement(P,{className:"app__json-editor",value:l,onChange:s})))},null),document.getElementById("root"))},50:function(e,t,n){e.exports=n(106)},63:function(e,t,n){},64:function(e,t,n){}},[[50,1,2]]]);
//# sourceMappingURL=main.0328e4ed.chunk.js.map