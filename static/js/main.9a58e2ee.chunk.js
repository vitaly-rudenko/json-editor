(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(16),c=n.n(i),o=n(4),l=n(19),s=n(37),u=n(38),f=(n(49),Object.freeze({PRIMITIVE:"primitive",OBJECT:"object",ARRAY:"array"}));function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(n,!0).forEach(function(t){Object(s.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var d=[13624049,16711584,15978964,13631440],b=a.a.memo(a.a.forwardRef(function(e,t){var n=e.field,r=(e.index,e.onDrag,e.className),i=void 0===r?"":r,c=Object(u.a)(e,["field","index","onDrag","className"]);return a.a.createElement("div",Object.assign({ref:t},c,{className:"field-block ".concat(i),style:y({},c.style||{},{marginLeft:"".concat(16*n.level,"px"),backgroundColor:"#"+d[n.level%d.length].toString(16)})}),!n.isArrayItem&&"".concat(n.key,":")," ",function(e){return e.type===f.PRIMITIVE?"string"===typeof e.value?'"'+e.value+'"':String(e.value):e.type===f.ARRAY?"[":"{"}(n))})),v=(n(50),function(e){var t=e.fieldList,n=e.onFieldListUpdate,i=e.className,c=void 0===i?"":i,o=Object(r.useCallback)(function(e){if(e.destination){var r=e.source.index,a=e.destination.index,i=t.move(r,a);i!==t&&n(i)}},[t,n]);return a.a.createElement(l.a,{onDragEnd:o},a.a.createElement(l.c,{droppableId:"droppable"},function(e){return a.a.createElement("div",Object.assign({},e.droppableProps,{ref:e.innerRef,className:"field-list ".concat(c)}),t.fields.map(function(e,t){return a.a.createElement(l.b,{key:e.id,draggableId:e.id,index:t},function(n){return a.a.createElement(b,Object.assign({className:"field-list__field-block",ref:n.innerRef},n.draggableProps,n.dragHandleProps,{index:t,field:e}))})}),e.placeholder)}))}),h=(n(90),function(e){var t=e.value,n=e.onChange,i=e.className,c=void 0===i?"":i,l=Object(r.useState)(t),s=Object(o.a)(l,2),u=s[0],f=s[1],p=Object(r.useState)(!1),y=Object(o.a)(p,2),d=y[0],b=y[1],v=Object(r.useCallback)(function(){return f(t)},[t]);Object(r.useEffect)(function(){f(t)},[t]),Object(r.useEffect)(function(){var e=function(e){e.ctrlKey&&"s"===e.key&&(e.preventDefault(),u!==t&&n(u,v))};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}},[t,u,n,v]);var h=Object(r.useCallback)(function(e){var t=e.target.value;f(t)},[f]),O=Object(r.useCallback)(function(){b(!0)},[b]),j=Object(r.useCallback)(function(e){var r=e.target.value;b(!1),r!==t&&n(r,v)},[t,n,v]),m=Object(r.useCallback)(function(e){var t=e.target,n=t.value;if("Tab"===e.key){e.preventDefault();var r=t.selectionStart,a=t.selectionEnd;t.value=n.substring(0,r)+"    "+n.substring(a),t.selectionEnd=r+"    ".length}},[]);return a.a.createElement("div",{className:"text-editor ".concat(c)},a.a.createElement("textarea",{className:["text-editor__text-area",d&&"text-editor__text-area--focused"].filter(Boolean).join(" "),onChange:h,onBlur:j,onFocus:O,value:u,onKeyDown:m,autoCapitalize:"off",autoCorrect:"off",autoComplete:"off",spellCheck:"false"}),d&&a.a.createElement("div",{className:"text-editor__apply-notice"},"Click outside to apply changes (Ctrl+S)"))}),O=(n(91),n(1)),j=n(2),m=n(3),g=function(){function e(){Object(j.a)(this,e)}return Object(m.a)(e,null,[{key:"fromFieldList",value:function(e){var t={},n=!0,r=!1,a=void 0;try{for(var i,c=e.fields[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var l=i.value;console.log("[".concat([].concat(Object(O.a)(l.parentChain),[l.key]).join("."),": ").concat(void 0===l.value?"none":l.value," (").concat(l.type,", item: ").concat(l.isArrayItem,")]"))}}catch(_){r=!0,a=_}finally{try{n||null==c.return||c.return()}finally{if(r)throw a}}var s=!0,u=!1,p=void 0;try{for(var y,d=e.fields[Symbol.iterator]();!(s=(y=d.next()).done);s=!0){var b=y.value,v=t,h=!0,j=!1,m=void 0;try{for(var g,k=b.parentChain.entries()[Symbol.iterator]();!(h=(g=k.next()).done);h=!0){var w=g.value,C=Object(o.a)(w,2),E=C[0],A=C[1];void 0===v[A]&&(E===b.parentChain.length-1?v[A]=b.type===f.ARRAY?[]:{}:v[A]={}),v=v[A]}}catch(_){j=!0,m=_}finally{try{h||null==k.return||k.return()}finally{if(j)throw m}}var x=b.type===f.ARRAY?[]:b.type===f.OBJECT?{}:b.value;v[b.key]=x}}catch(_){u=!0,p=_}finally{try{s||null==d.return||d.return()}finally{if(u)throw p}}return t}}]),e}(),k=n(43),w=n.n(k),C=function(){function e(){Object(j.a)(this,e)}return Object(m.a)(e,null,[{key:"recognizeType",value:function(e){return Array.isArray(e)?f.ARRAY:"object"===typeof e&&null!==e?f.OBJECT:f.PRIMITIVE}}]),e}(),E=function(){function e(t){Object(j.a)(this,e),t instanceof e?(this.id=t.id,this.type=t.type,this.parentChain=Object(O.a)(t.parentChain),this.key=t.key,this.value=t.value,this.isArrayItem=t.isArrayItem):(this.id=w()(),this.type=C.recognizeType(t.value),this.parentChain=t.parentChain||[],this.key=t.key,this.value=this.type===f.PRIMITIVE?t.value:void 0,this.isArrayItem=Boolean(t.isArrayItem))}return Object(m.a)(e,[{key:"level",get:function(){return this.parentChain.length}}]),e}(),A=function(){function e(t){Object(j.a)(this,e),this.fields=t instanceof e?Object(O.a)(t.fields):t}return Object(m.a)(e,[{key:"move",value:function(t,n){if(t===n)return this;var r=this.fields[t],a=t>n?n-1:n,i=t>n?n:n+1,c=this.fields[a],o=this.fields[i]||c,l=[],s=[].concat(Object(O.a)(r.parentChain),[r.key]);if(r.type===f.OBJECT){var u=!0,p=!1,y=void 0;try{for(var d,b=this.fields[Symbol.iterator]();!(u=(d=b.next()).done);u=!0){var v=d.value;v.parentChain.toString().startsWith(s.toString())&&l.push(v)}}catch(C){p=!0,y=C}finally{try{u||null==b.return||b.return()}finally{if(p)throw y}}}var h=new E(r);h.parentChain=o.parentChain;var j=Object(O.a)(this.fields);j.splice(a+1,0,h),j.splice(j.indexOf(r),1);for(var m=0,g=l;m<g.length;m++){var k=g[m];j.splice(j.indexOf(k),1)}var w=l.map(function(e){var t=new E(e);return t.parentChain=[].concat(Object(O.a)(h.parentChain),[h.key],Object(O.a)(e.parentChain.slice(s.length))),t});return j.splice.apply(j,[j.indexOf(h)+1,0].concat(Object(O.a)(w))),new e(j)}}]),e}(),x=function(){function e(){Object(j.a)(this,e)}return Object(m.a)(e,null,[{key:"from",value:function(e){if(Array.isArray(e))throw new Error("Arrays are not supported yet");if(!this._isPlainObject(e))throw new Error("Source should be either an array or plain object");return new A(this._fromObject(e))}},{key:"_fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=!0,a=!1,i=void 0;try{for(var c,l=e.entries()[Symbol.iterator]();!(r=(c=l.next()).done);r=!0){var s=c.value,u=Object(o.a)(s,2),f=u[0],p=u[1];n.push(new E({key:f,value:p,parentChain:t,isArrayItem:!0})),Array.isArray(p)&&n.push.apply(n,Object(O.a)(this._fromArray(p,[].concat(Object(O.a)(t),[f])))),this._isPlainObject(p)&&n.push.apply(n,Object(O.a)(this._fromObject(p,[].concat(Object(O.a)(t),[f]))))}}catch(y){a=!0,i=y}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}},{key:"_fromObject",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=0,a=Object.entries(e);r<a.length;r++){var i=a[r],c=Object(o.a)(i,2),l=c[0],s=c[1];n.push(new E({key:l,value:s,parentChain:t})),Array.isArray(s)&&n.push.apply(n,Object(O.a)(this._fromArray(s,[].concat(Object(O.a)(t),[l])))),this._isPlainObject(s)&&n.push.apply(n,Object(O.a)(this._fromObject(s,[].concat(Object(O.a)(t),[l]))))}return n}},{key:"_isPlainObject",value:function(e){return"object"===typeof e&&null!==e&&!Array.isArray(e)}}]),e}(),_={hello:"world",isEnabled:!0,nested:{lorem:"ipsum",secretNumber:123,nested2:{jon:"snow"}},inception:{hello2:"world",isEnabled2:!0,nested3:{lorem2:"ipsum",secretNumber2:123,nested4:{jon:"snow"}}}};c.a.render(a.a.createElement(function(){var e=Object(r.useState)(x.from(_)),t=Object(o.a)(e,2),n=t[0],i=t[1],c=Object(r.useMemo)(function(){return JSON.stringify(g.fromFieldList(n),null,4)},[n]),l=Object(r.useCallback)(function(e){i(e)},[i]),s=Object(r.useCallback)(function(e,t){var n;try{n=JSON.parse(e)}catch(r){return void t()}i(x.from(n))},[i]);return a.a.createElement("div",{className:"app-wrapper"},a.a.createElement("div",{className:"app"},a.a.createElement(v,{className:"app__field-list",fieldList:n,onFieldListUpdate:l}),a.a.createElement(h,{className:"app__json-editor",value:c,onChange:s})))},null),document.getElementById("root"))},44:function(e,t,n){e.exports=n(100)},49:function(e,t,n){},50:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){}},[[44,1,2]]]);
//# sourceMappingURL=main.9a58e2ee.chunk.js.map